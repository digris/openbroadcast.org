{% extends "layout_base.html" %}
{% load adv_cache hash_tags i18n static dajaxice_templatetags sekizai_tags %}

{% block scope %}alibrary.release{% endblock %}

{% block heading %}
    {% addtoblock "js-post" %}{% dajaxice_js_import %}{% endaddtoblock %}
    {% addtoblock "js-post" %}<script src="{% static 'alibrary/js/list.js' %}"></script>{% endaddtoblock %}
    {% addtoblock "js-post" %}<script src="{% static 'exporter/js/base.js' %}"></script>{% endaddtoblock %}
    {% addtoblock "js-post" %}
        <script>
            var list_edit = list_edit || {};
            $(function () {
                list_edit = new ListEditUi();
                list_edit.init();

                exporter = new ExporterApp();
                exporter.api_url = '{% url "api_dispatch_list" resource_name='export' api_name='v1'%}';
                exporter.init();
            });
        </script>
    {% endaddtoblock %}
    <div id="heading">
        {% include "skeleton/heading.html" %}
    </div>
{% endblock %}

{% block modnav %}
    <div id="modnav">
        {% include "skeleton/module-navigation.html" %}
    </div>
{% endblock %}

{% block tagcloud %}
    {% include "search/tagcloud.html" %}
{% endblock %}

{% block searchbar %}
    {% with object=item ct="label" %}
        {# include "alibrary/element/_searchbar.html" #}
    {% endwith %}
{% endblock %}

{% block inner %}
    <div class="list-header">
        <div class="pagination-holder">
            {% include "search/pagination.html" %}
        </div>
        <div class="controls-container">
            <div class="controls">
                {% with object=None ct="alibrary.release" %}
                    {% include "alibrary/element/_list_primary_actions.html" %}
                {% endwith %}
            </div>
        </div>
    </div>
    <div class="listview container release l">
        <div class="list_body">
            {% hash_user_groups request.user as group_hash %}
            {% for item in object_list %}
                {% cache 600 "release_list_item_l" item.pk group_hash item.updated %}
                    {% include "alibrary/release/list_item.html" %}
                {% endcache %}
            {% empty %}
                <p style="padding: 20px; text-align: center;">
                    {% trans 'No results to display.' %}
                </p>
            {% endfor %}
        </div>
    </div>
    <div class="list-footer">
        <div class="pagination-holder">
            {% include "search/pagination.html" %}
        </div>
    </div>
{% endblock %}

{% block sidebar %}
    {% include "alibrary/release/sidebar/_list.html" %}
    {% include "search/_partials/_list_ordering.html" with ordering=ordering %}
    {% include "search/_partials/_list_filter.html" with filters=filters %}
{% endblock %}
